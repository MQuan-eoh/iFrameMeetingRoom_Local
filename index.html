<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Meeting Room Management</title>
    <!-- Excel library removed -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
    <script src="https://alcdn.msauth.net/browser/2.39.0/js/msal-browser.min.js"></script>

    <!-- Custom styles for server config modal -->
    <style>
      .modal {
        display: none;
        position: fixed;
        z-index: 10000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.6);
      }

      .modal-content {
        background-color: white;
        margin: 15% auto;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        position: relative;
      }

      .close-modal {
        position: absolute;
        top: 10px;
        right: 15px;
        font-size: 24px;
        font-weight: bold;
        cursor: pointer;
      }

      .toast-notification {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 12px 20px;
        border-radius: 4px;
        z-index: 10001;
        display: flex;
        align-items: center;
        gap: 8px;
        opacity: 0;
        transition: opacity 0.3s ease;
      }
    </style>

    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&amp;display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="assets/styles.css" />
    <link rel="stylesheet" href="assets/schedule-booking.css" />
    <link rel="stylesheet" href="assets/meeting-detail-tooltip.css" />
  </head>
  <body>
    <!-- Server configuration modal -->
    <div id="serverConfigModal" class="modal" style="display: none">
      <div class="modal-content" style="max-width: 400px">
        <span
          class="close-modal"
          onclick="document.getElementById('serverConfigModal').style.display = 'none'"
          >&times;</span
        >
        <h2>Cấu hình Máy Chủ</h2>
        <p>Nhập địa chỉ IP của máy chủ chính để đồng bộ dữ liệu</p>
        <div style="margin: 20px 0">
          <label for="serverIP">Địa chỉ IP máy chủ:</label>
          <input
            type="text"
            id="serverIP"
            placeholder="192.168.1.x hoặc localhost"
            style="width: 100%; padding: 8px; margin-top: 5px"
          />
        </div>
        <button
          id="saveServerIP"
          style="
            background-color: #4caf50;
            color: white;
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            border-radius: 4px;
          "
        >
          Lưu cấu hình
        </button>
      </div>
    </div>

    <div class="meeting-page">
      <div
        class="dynamic-page-container"
        id="dynamicPageContent"
        style="display: none"
      ></div>
      <div class="meeting-screen">
        <div class="meeting-container">
          <div class="content-wrapper">
            <div class="left-column">
              <div class="header-section">
                <div class="date-wrapper">
                  <div class="logo" id="currentTimeHomePage">Time</div>
                  <div class="current-date" id="currentDateHomePage">
                    <span>Thứ Hai</span>
                    <span>10/11/2024</span>
                  </div>
                </div>

                <div class="welcome-text">
                  <div class="welcome-message">CHÀO MỪNG ĐẾN VỚI OTS</div>
                </div>
                <div class="room-tabs">
                  <div class="rooms-container">
                    <div class="room-section">
                      <div class="room-number">PHÒNG HỌP LẦU 3</div>
                      <div class="room-details">
                        <div class="meeting-info">
                          <div class="meeting-header">
                            <div class="meeting-title">
                              <span>Thông tin cuộc họp: Trống</span>
                            </div>
                            <div class="meeting-time">
                              <div class="time-spacer"></div>
                              <div class="start-time">
                                <span>Thời gian bắt đầu:</span>
                                7:00
                              </div>
                              <div class="end-time">
                                <span>Thời gian kết thúc:</span>
                                9:00
                              </div>
                            </div>
                          </div>
                          <div class="meeting-stats">
                            <div class="stats-row">
                              <div class="temperature">
                                Nhiệt độ: <span id="temperature-eRa"></span> °C
                              </div>
                              <div class="humidity">
                                Độ ẩm: <span id="humidity-eRa"></span> %
                              </div>
                            </div>
                            <div class="stats-row">
                              <div class="currentLotus">
                                PM2.5: <span id="current-eRa"></span> µg/m³
                              </div>
                              <div class="voltage">
                                PM10: <span id="voltage-eRa"></span> µg/m³
                              </div>
                            </div>
                            <div class="stats-row indicators-container">
                              <div class="status-group">
                                <div class="status-indicator">
                                  <div class="indicator-dot busy"></div>
                                  <div class="status-text">Đang họp</div>
                                </div>
                                <div class="people-indicator">
                                  <div class="people-dot"></div>
                                  <div class="people-status-text">
                                    Đang kiểm tra...
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="room-section">
                      <div class="room-number">PHÒNG HỌP LẦU 4</div>
                      <div class="room-details">
                        <div class="meeting-info">
                          <div class="meeting-header">
                            <div class="meeting-title">
                              <span>Thông tin cuộc họp:</span>
                              Trống
                            </div>
                            <div class="meeting-time">
                              <div class="time-spacer"></div>
                              <div class="start-time">
                                <span>Thời gian bắt đầu:</span>
                                --:--
                              </div>
                              <div class="end-time">
                                <span>Thời gian kết thúc:</span>
                                --:--
                              </div>
                            </div>
                          </div>
                          <div class="meeting-stats">
                            <div class="stats-row">
                              <div class="temperature">
                                Nhiệt độ: <span id="temperature-eRa2"></span>°C
                              </div>
                              <div class="humidity">
                                Độ ẩm: <span id="humidity-eRa2"></span>%
                              </div>
                            </div>
                            <div class="stats-row indicators-container">
                              <div class="status-group">
                                <div class="status-indicator">
                                  <div class="indicator-dot available"></div>
                                  <div class="status-text">Trống</div>
                                </div>
                                <div class="people-indicator">
                                  <div class="people-dot"></div>
                                  <div class="people-status-text">
                                    Đang kiểm tra...
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="background-management">
                      <div class="settings-icon">
                        <i class="fas fa-cog"></i>
                      </div>
                      <div class="settings-content hidden">
                        <div class="change-name-container">
                          <button class="change-name-button">
                            <div class="button-icon-wrapper">
                              <i class="fas fa-edit"></i>
                            </div>
                            <span>Change Name</span>
                          </button>
                        </div>
                        <div
                          class="background-upload-container main-bg-container"
                        >
                          <input
                            type="file"
                            id="mainBackgroundUpload"
                            accept="image/*"
                            hidden
                          />
                          <button
                            class="background-upload-button main-background-btn"
                          >
                            <div class="button-icon-wrapper">
                              <i class="fas fa-desktop"></i>
                            </div>
                            <span>Background Chính</span>
                          </button>
                        </div>

                        <button class="reset-background-button">
                          <div class="button-icon-wrapper">
                            <i class="fas fa-undo"></i>
                          </div>
                          <span>Đặt Lại</span>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="right-column">
              <div class="schedule-section">
                <div class="schedule-content">
                  <h1 class="schedule-title">THÔNG TIN LỊCH HỌP</h1>
                  <div class="schedule-actions">
                    <button class="create-meeting-button" id="createMeetingBtn">
                      Create Meeting
                      <i class="fas fa-calendar-plus"></i>
                    </button>
                    <input type="date" id="meetingDate" class="date-picker" />
                  </div>

                  <!-- New Schedule Booking System -->
                  <div class="schedule-booking-container">
                    <!-- View Controls -->
                    <div class="schedule-view-controls">
                      <div class="schedule-view-title">Lịch Phòng Họp</div>

                      <!-- Room Filter Button -->
                      <div class="room-filter-container">
                        <button class="room-filter-button" id="roomFilterBtn">
                          <i class="fas fa-filter"></i>
                          Lọc Phòng
                          <i
                            class="fas fa-chevron-down filter-dropdown-icon"
                          ></i>
                        </button>
                        <div
                          class="room-filter-dropdown"
                          id="roomFilterDropdown"
                        >
                          <div class="filter-option active" data-room="all">
                            <i class="fas fa-check filter-check"></i>
                            Tất cả phòng
                          </div>
                          <div
                            class="filter-option"
                            data-room="Phòng họp lầu 3"
                          >
                            <i class="fas fa-check filter-check"></i>
                            Phòng họp lầu 3
                          </div>
                          <div
                            class="filter-option"
                            data-room="Phòng họp lầu 4"
                          >
                            <i class="fas fa-check filter-check"></i>
                            Phòng họp lầu 4
                          </div>
                        </div>
                      </div>

                      <div class="schedule-view-selector">
                        <div class="view-option active" data-view="week">
                          Tuần
                        </div>
                        <div class="view-option" data-view="month"></div>
                      </div>
                    </div>

                    <!-- Navigation Controls -->
                    <div class="schedule-navigation">
                      <button class="nav-arrow" id="prevPeriod">
                        <i class="fas fa-chevron-left"></i> Trước
                      </button>
                      <div class="current-period" id="currentPeriod">
                        25/07 - 31/07/2025
                      </div>
                      <button class="nav-arrow" id="nextPeriod">
                        Sau <i class="fas fa-chevron-right"></i>
                      </button>
                    </div>

                    <!-- Week View -->
                    <div class="schedule-week-view" id="weekView">
                      <!-- Time Column -->
                      <div class="time-column">
                        <div class="day-header"></div>
                        <div class="time-slot">07:00</div>
                        <div class="time-slot">08:00</div>
                        <div class="time-slot">09:00</div>
                        <div class="time-slot">10:00</div>
                        <div class="time-slot">11:00</div>
                        <div class="time-slot">12:00</div>
                        <div class="time-slot">13:00</div>
                        <div class="time-slot">14:00</div>
                        <div class="time-slot">15:00</div>
                        <div class="time-slot">16:00</div>
                        <div class="time-slot">17:00</div>
                        <div class="time-slot">18:00</div>
                        <div class="time-slot">19:00</div>
                        <div class="time-slot">20:00</div>
                        <div class="time-slot">21:00</div>
                        <div class="time-slot">22:00</div>
                        <div class="time-slot">23:00</div>
                        <div class="time-slot">24:00</div>
                      </div>

                      <!-- Day Columns (Will be populated by JavaScript) -->
                      <div class="day-column" data-day="0">
                        <div class="day-header">
                          <div class="day-name">T2</div>
                          <div class="day-date">25/07</div>
                        </div>
                        <div class="day-grid">
                          <div class="day-cell" data-time="07:00"></div>
                          <div class="day-cell" data-time="08:00"></div>
                          <div class="day-cell" data-time="09:00"></div>
                          <div class="day-cell" data-time="10:00"></div>
                          <div class="day-cell" data-time="11:00"></div>
                          <div class="day-cell" data-time="12:00"></div>
                          <div class="day-cell" data-time="13:00"></div>
                          <div class="day-cell" data-time="14:00"></div>
                          <div class="day-cell" data-time="15:00"></div>
                          <div class="day-cell" data-time="16:00"></div>
                          <div class="day-cell" data-time="17:00"></div>
                          <div class="day-cell" data-time="18:00"></div>
                          <div class="day-cell" data-time="19:00"></div>
                          <div class="day-cell" data-time="20:00"></div>
                          <div class="day-cell" data-time="21:00"></div>
                          <div class="day-cell" data-time="22:00"></div>
                          <div class="day-cell" data-time="23:00"></div>
                          <div class="day-cell" data-time="24:00"></div>
                        </div>
                      </div>

                      <!-- Sample day columns for the rest of the week -->
                      <div class="day-column day-today" data-day="1">
                        <div class="day-header">
                          <div class="day-name">T3</div>
                          <div class="day-date">26/07</div>
                        </div>
                        <div class="day-grid">
                          <div class="day-cell" data-time="07:00"></div>
                          <div class="day-cell" data-time="08:00"></div>
                          <div class="day-cell" data-time="09:00"></div>
                          <div class="day-cell" data-time="10:00"></div>
                          <div class="day-cell" data-time="11:00"></div>
                          <div class="day-cell" data-time="12:00"></div>
                          <div class="day-cell" data-time="13:00"></div>
                          <div class="day-cell" data-time="14:00"></div>
                          <div class="day-cell" data-time="15:00"></div>
                          <div class="day-cell" data-time="16:00"></div>
                          <div class="day-cell" data-time="17:00"></div>
                          <div class="day-cell" data-time="18:00"></div>
                          <div class="day-cell" data-time="19:00"></div>
                          <div class="day-cell" data-time="20:00"></div>
                          <div class="day-cell" data-time="21:00"></div>
                          <div class="day-cell" data-time="22:00"></div>
                          <div class="day-cell" data-time="23:00"></div>
                          <div class="day-cell" data-time="24:00"></div>
                        </div>
                      </div>

                      <!-- More day columns will be dynamically generated by JS -->
                      <div class="day-column" data-day="2">
                        <div class="day-header">
                          <div class="day-name">T4</div>
                          <div class="day-date">27/07</div>
                        </div>
                        <div class="day-grid">
                          <div class="day-cell" data-time="07:00"></div>
                          <div class="day-cell" data-time="08:00"></div>
                          <div class="day-cell" data-time="09:00"></div>
                          <div class="day-cell" data-time="10:00"></div>
                          <div class="day-cell" data-time="11:00"></div>
                          <div class="day-cell" data-time="12:00"></div>
                          <div class="day-cell" data-time="13:00"></div>
                          <div class="day-cell" data-time="14:00"></div>
                          <div class="day-cell" data-time="15:00"></div>
                          <div class="day-cell" data-time="16:00"></div>
                          <div class="day-cell" data-time="17:00"></div>
                          <div class="day-cell" data-time="18:00"></div>
                          <div class="day-cell" data-time="19:00"></div>
                          <div class="day-cell" data-time="20:00"></div>
                          <div class="day-cell" data-time="21:00"></div>
                          <div class="day-cell" data-time="22:00"></div>
                          <div class="day-cell" data-time="23:00"></div>
                          <div class="day-cell" data-time="24:00"></div>
                        </div>
                      </div>

                      <div class="day-column" data-day="3">
                        <div class="day-header">
                          <div class="day-name">T5</div>
                          <div class="day-date">28/07</div>
                        </div>
                        <div class="day-grid">
                          <div class="day-cell" data-time="07:00"></div>
                          <div class="day-cell" data-time="08:00"></div>
                          <div class="day-cell" data-time="09:00"></div>
                          <div class="day-cell" data-time="10:00"></div>
                          <div class="day-cell" data-time="11:00"></div>
                          <div class="day-cell" data-time="12:00"></div>
                          <div class="day-cell" data-time="13:00"></div>
                          <div class="day-cell" data-time="14:00"></div>
                          <div class="day-cell" data-time="15:00"></div>
                          <div class="day-cell" data-time="16:00"></div>
                          <div class="day-cell" data-time="17:00"></div>
                          <div class="day-cell" data-time="18:00"></div>
                          <div class="day-cell" data-time="19:00"></div>
                          <div class="day-cell" data-time="20:00"></div>
                          <div class="day-cell" data-time="21:00"></div>
                          <div class="day-cell" data-time="22:00"></div>
                          <div class="day-cell" data-time="23:00"></div>
                          <div class="day-cell" data-time="24:00"></div>
                        </div>
                      </div>

                      <div class="day-column" data-day="4">
                        <div class="day-header">
                          <div class="day-name">T6</div>
                          <div class="day-date">29/07</div>
                        </div>
                        <div class="day-grid">
                          <div class="day-cell" data-time="07:00"></div>
                          <div class="day-cell" data-time="08:00"></div>
                          <div class="day-cell" data-time="09:00"></div>
                          <div class="day-cell" data-time="10:00"></div>
                          <div class="day-cell" data-time="11:00"></div>
                          <div class="day-cell" data-time="12:00"></div>
                          <div class="day-cell" data-time="13:00"></div>
                          <div class="day-cell" data-time="14:00"></div>
                          <div class="day-cell" data-time="15:00"></div>
                          <div class="day-cell" data-time="16:00"></div>
                          <div class="day-cell" data-time="17:00"></div>
                          <div class="day-cell" data-time="18:00"></div>
                          <div class="day-cell" data-time="19:00"></div>
                          <div class="day-cell" data-time="20:00"></div>
                          <div class="day-cell" data-time="21:00"></div>
                          <div class="day-cell" data-time="22:00"></div>
                          <div class="day-cell" data-time="23:00"></div>
                          <div class="day-cell" data-time="24:00"></div>
                        </div>
                      </div>

                      <div class="day-column" data-day="5">
                        <div class="day-header">
                          <div class="day-name">T7</div>
                          <div class="day-date">30/07</div>
                        </div>
                        <div class="day-grid">
                          <div class="day-cell" data-time="07:00"></div>
                          <div class="day-cell" data-time="08:00"></div>
                          <div class="day-cell" data-time="09:00"></div>
                          <div class="day-cell" data-time="10:00"></div>
                          <div class="day-cell" data-time="11:00"></div>
                          <div class="day-cell" data-time="12:00"></div>
                          <div class="day-cell" data-time="13:00"></div>
                          <div class="day-cell" data-time="14:00"></div>
                          <div class="day-cell" data-time="15:00"></div>
                          <div class="day-cell" data-time="16:00"></div>
                          <div class="day-cell" data-time="17:00"></div>
                          <div class="day-cell" data-time="18:00"></div>
                          <div class="day-cell" data-time="19:00"></div>
                          <div class="day-cell" data-time="20:00"></div>
                          <div class="day-cell" data-time="21:00"></div>
                          <div class="day-cell" data-time="22:00"></div>
                          <div class="day-cell" data-time="23:00"></div>
                          <div class="day-cell" data-time="24:00"></div>
                        </div>
                      </div>

                      <div class="day-column" data-day="6">
                        <div class="day-header">
                          <div class="day-name">CN</div>
                          <div class="day-date">31/07</div>
                        </div>
                        <div class="day-grid">
                          <div class="day-cell" data-time="07:00"></div>
                          <div class="day-cell" data-time="08:00"></div>
                          <div class="day-cell" data-time="09:00"></div>
                          <div class="day-cell" data-time="10:00"></div>
                          <div class="day-cell" data-time="11:00"></div>
                          <div class="day-cell" data-time="12:00"></div>
                          <div class="day-cell" data-time="13:00"></div>
                          <div class="day-cell" data-time="14:00"></div>
                          <div class="day-cell" data-time="15:00"></div>
                          <div class="day-cell" data-time="16:00"></div>
                          <div class="day-cell" data-time="17:00"></div>
                          <div class="day-cell" data-time="18:00"></div>
                          <div class="day-cell" data-time="19:00"></div>
                          <div class="day-cell" data-time="20:00"></div>
                          <div class="day-cell" data-time="21:00"></div>
                          <div class="day-cell" data-time="22:00"></div>
                          <div class="day-cell" data-time="23:00"></div>
                          <div class="day-cell" data-time="24:00"></div>
                        </div>
                      </div>
                    </div>

                    <!-- Month View (Hidden by default) -->
                    <div
                      class="schedule-month-view"
                      id="monthView"
                      style="display: none"
                    >
                      <!-- Will be populated by JavaScript -->
                    </div>
                  </div>
                </div>
                <div class="fullscreen-toggle">
                  <button
                    id="fullscreenBtn"
                    class="fullscreen-button"
                    aria-label="Toggle Fullscreen"
                  >
                    <i class="fas fa-expand"></i>
                  </button>
                </div>
                <div class="room-buttons">
                  <button class="room-button" aria-label="Select Room 1">
                    <div class="button-content">
                      <div class="button-text">P.HỌP LẦU 3</div>
                    </div>
                  </button>
                  <button class="room-button" aria-label="Select Room 2">
                    <div class="button-content">
                      <div class="button-text">P.HỌP LẦU 4</div>
                    </div>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-container"></div>
    </div>

    <!-- Meeting Creation Modal -->
    <div id="bookingModal" class="booking-modal">
      <div class="booking-modal-content">
        <div class="booking-modal-header">
          <h2 class="booking-modal-title">Đặt Lịch Phòng Họp</h2>
          <button class="modal-close" id="closeBookingModal">&times;</button>
        </div>

        <div class="booking-modal-body">
          <form id="bookingForm" class="booking-form">
            <!-- Room Selection -->
            <div class="form-group">
              <label for="bookingRoom">Phòng Họp:</label>
              <select id="bookingRoom" class="form-control" required>
                <option value="">-- Chọn phòng họp --</option>
                <option value="Phòng họp lầu 3">Phòng họp lầu 3</option>
                <option value="Phòng họp lầu 4">Phòng họp lầu 4</option>
              </select>
            </div>

            <!-- Date Picker -->
            <div class="form-group">
              <label for="bookingDate">Ngày:</label>
              <input
                type="date"
                id="bookingDate"
                class="form-control"
                required
              />
            </div>

            <!-- Time Selection -->
            <div class="form-group">
              <label for="bookingStartTime">Thời gian bắt đầu:</label>
              <input
                type="text"
                id="bookingStartTime"
                class="form-control"
                placeholder="HH:MM (VD: 09:30)"
                pattern="^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$"
                required
              />
              <div id="startTimeOptions" class="custom-time-dropdown">
                <!-- Options will be populated dynamically -->
              </div>
              <small class="form-text text-muted"
                >Nhập thời gian (HH:MM) hoặc chọn từ gợi ý</small
              >
            </div>

            <div class="form-group">
              <label for="bookingEndTime">Thời gian kết thúc:</label>
              <input
                type="text"
                id="bookingEndTime"
                class="form-control"
                placeholder="HH:MM (VD: 10:30)"
                pattern="^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$"
                required
              />
              <div id="endTimeOptions" class="custom-time-dropdown">
                <!-- Options will be populated dynamically -->
              </div>
              <small class="form-text text-muted"
                >Nhập thời gian (HH:MM) hoặc chọn từ gợi ý</small
              >
            </div>

            <!-- Purpose Selection -->
            <div class="form-group">
              <label for="bookingPurpose">Mục đích:</label>
              <select id="bookingPurpose" class="form-control" required>
                <option value="">-- Chọn mục đích --</option>
                <option value="Họp">Họp</option>
                <option value="Đào tạo">Đào tạo</option>
                <option value="Phỏng vấn">Phỏng vấn</option>
                <option value="Thảo luận">Thảo luận</option>
                <option value="Báo cáo">Báo cáo</option>
                <option value="Khác">Khác</option>
              </select>
            </div>

            <!-- Department Selection -->
            <div class="form-group">
              <label for="bookingDepartment">Phòng/Ban:</label>
              <select id="bookingDepartment" class="form-control">
                <option value="">-- Chọn phòng ban --</option>
                <option value="Kỹ thuật">Phòng Kỹ thuật</option>
                <option value="Kinh doanh">Phòng Kinh doanh</option>
                <option value="Nhân sự">Phòng Nhân sự</option>
                <option value="Kế toán">Phòng Kế toán</option>
                <option value="Marketing">Phòng Marketing</option>
                <option value="Ban Giám đốc">Ban Giám đốc</option>
                <option value="Khác">Khác</option>
              </select>
            </div>

            <!-- Meeting Title -->
            <div class="form-group form-full-width">
              <label for="bookingTitle">Tiêu đề cuộc họp:</label>
              <input
                type="text"
                id="bookingTitle"
                class="form-control"
                placeholder="Nhập tiêu đề cuộc họp"
                required
              />
            </div>

            <!-- Meeting Description -->
            <div class="form-group form-full-width">
              <label for="bookingDescription">Nội dung chi tiết:</label>
              <textarea
                id="bookingDescription"
                class="form-control"
                rows="4"
                placeholder="Nhập nội dung chi tiết cuộc họp"
              ></textarea>
            </div>
          </form>
        </div>

        <div class="booking-modal-footer">
          <button class="btn btn-cancel" id="cancelBooking">Hủy</button>
          <button class="btn btn-save" id="saveBooking">Lưu</button>
        </div>
      </div>
    </div>
    <!-- External Scripts -->
    <script src="@eohjsc/era-widget/src/index.js"></script>
    <script src="https://alcdn.msauth.net/browser/2.30.0/js/msal-browser.min.js"></script>

    <!-- Server Configuration Script -->
    <script>
      // Initialize server configuration when document is ready
      document.addEventListener("DOMContentLoaded", () => {
        // Create server config button
        const configBtn = document.createElement("button");
        configBtn.id = "serverConfigBtn";
        configBtn.innerHTML = "⚙️";
        configBtn.title = "Cấu hình máy chủ";
        configBtn.style.cssText = `
          position: fixed;
          top: 10px;
          right: 10px;
          background: rgba(0,0,0,0.6);
          color: white;
          border: none;
          border-radius: 50%;
          width: 36px;
          height: 36px;
          font-size: 20px;
          cursor: pointer;
          z-index: 9999;
          display: flex;
          align-items: center;
          justify-content: center;
        `;
        document.body.appendChild(configBtn);

        // Open modal on click
        configBtn.addEventListener("click", () => {
          const modal = document.getElementById("serverConfigModal");
          const input = document.getElementById("serverIP");
          input.value =
            localStorage.getItem("serverIP") ||
            window.location.hostname ||
            "localhost";
          modal.style.display = "block";
        });

        // Save server IP
        document
          .getElementById("saveServerIP")
          .addEventListener("click", () => {
            const serverIP = document.getElementById("serverIP").value.trim();
            if (serverIP) {
              localStorage.setItem("serverIP", serverIP);
              alert(
                `Cấu hình máy chủ đã được lưu: ${serverIP}\nVui lòng làm mới trang để áp dụng thay đổi.`
              );
              document.getElementById("serverConfigModal").style.display =
                "none";

              // Reload after a short delay
              setTimeout(() => {
                window.location.reload();
              }, 1000);
            } else {
              alert("Vui lòng nhập địa chỉ IP hợp lệ.");
            }
          });
      });
    </script>

    <!-- New Modular Application Structure -->
    <script src="http://192.168.1.47:3000/@eohjsc/era-widget/src/index.js"></script>
    <script type="module" src="script/index.js"></script>
    <script src="script/modules/ERaServices.js"></script>
    <!-- Debug Navigation Helper (for testing) -->
    <script src="debug-navigation.js"></script>

    <!-- Legacy Support (can be removed once migration is complete) -->
    <!-- <script src="script/index.js"></script> -->
  </body>
</html>
